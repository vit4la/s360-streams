# Решение проблемы "access_token was given to another ip address"

## Проблема
Ошибка 5: "User authorization failed: access_token was given to another ip address"

VK привязывает токены к IP адресу, с которого они были получены. Если токен получен с одного IP, а используется с другого - будет ошибка.

## Решение 1: Получить токен с IP сервера

1. **Подключитесь к серверу через SSH**
2. **На сервере откройте браузер через X11 forwarding или используйте curl:**

```bash
# На сервере получите токен через curl (если есть доступ к браузеру на сервере)
# Или используйте прокси/VPN для получения токена с IP сервера
```

## Решение 2: Использовать прокси при получении токена

1. **Подключитесь к серверу через VPN или прокси**
2. **Получите токен через OAuth с IP сервера**
3. **Токен будет работать на сервере**

## Решение 3: Исправить имя переменной в .env

В .env файле токен записан как `_pyVK_TOKEN` вместо `VK_TOKEN`. Нужно исправить:

```bash
# В nano отредактируйте .env
# Удалите строку с _pyVK_TOKEN
# Добавьте правильную строку:
VK_TOKEN=vk1.a.ваш_токен_здесь
```

## Решение 4: Получить токен без привязки к IP (если возможно)

Некоторые типы токенов VK не привязаны к IP. Попробуйте получить токен через другой метод или настройки приложения.

## Важно:

- Токен должен быть получен с того же IP, с которого будет использоваться
- Или используйте прокси/VPN для получения токена с IP сервера
- Убедитесь, что в .env файле переменная называется `VK_TOKEN`, а не `_pyVK_TOKEN`
