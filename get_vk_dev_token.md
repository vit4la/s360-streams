# Как получить токен разработчика VK через vk.com/dev

## Шаг 1: Создать/найти приложение на VK Dev

1. Перейдите на https://vk.com/dev
2. Войдите в свой аккаунт VK
3. Перейдите в раздел **"Мои приложения"** (или создайте новое)
4. Если приложения нет - нажмите **"Создать приложение"**
5. Выберите тип: **"Standalone приложение"** (важно!)
6. Заполните название (любое, например "VK Parser")
7. Нажмите **"Подключить приложение"**

## Шаг 2: Получить токен через OAuth

После создания приложения:

1. **Скопируйте ID приложения** (Application ID) - он будет показан на странице приложения

2. **Откройте в браузере** (замените `YOUR_APP_ID` на ID вашего приложения):
   ```
   https://oauth.vk.com/authorize?client_id=YOUR_APP_ID&display=page&redirect_uri=https://oauth.vk.com/blank.html&scope=wall,groups,offline&response_type=token&v=5.199
   ```
   
   Например, если ID приложения = 12345678:
   ```
   https://oauth.vk.com/authorize?client_id=12345678&display=page&redirect_uri=https://oauth.vk.com/blank.html&scope=wall,groups,offline&response_type=token&v=5.199
   ```

3. **Нажмите "Разрешить"**

4. **Скопируйте токен из адресной строки**:
   - После перенаправления URL будет вида:
   ```
   https://oauth.vk.com/blank.html#access_token=ВАШ_ТОКЕН_ЗДЕСЬ&expires_in=0&user_id=123456
   ```
   - Скопируйте часть между `access_token=` и `&` - это ваш токен
   - `expires_in=0` означает, что токен бессрочный (благодаря `offline` в scope)

## Шаг 3: Сохранить токен на сервере

```bash
# На сервере
nano /root/s360-streams/.env

# Добавьте или замените строку:
VK_TOKEN=ваш_токен_здесь

# Сохраните (Ctrl+O, Enter, Ctrl+X)
```

## Шаг 4: Перезапустить сервис

```bash
systemctl restart vk-to-telegram.service
tail -n 20 /root/s360-streams/vk_to_telegram.log
```

## Важно:

- **Тип приложения должен быть "Standalone"** - иначе некоторые методы API не работают
- **Scope должен включать:** `wall`, `groups`, `offline` (offline для бессрочного токена)
- **Для публичной группы** не нужны права администратора - достаточно токена разработчика с правами `wall`, `groups`

## Если приложение уже существует:

1. Перейдите на https://vk.com/dev
2. Выберите ваше приложение
3. Скопируйте **Application ID** (ID приложения)
4. Используйте его в URL для получения токена (см. Шаг 2)

## Проверка токена:

После получения токена можно проверить его работоспособность:

```bash
# На сервере запустите диагностику
python3 check_vk_service.py
```

Если в разделе "4. ПРОВЕРКА VK API" появится "✅ VK API работает", значит токен рабочий.
