# Как получить классический токен VK API (не VK ID)

## Проблема
Токен `vk1.a.` - это токен VK ID, он не работает для `wall.get`. Нужен классический токен VK API.

## Решение: Получить токен через классическое VK API приложение

### Шаг 1: Откройте классический VK Dev (НЕ VK ID!)

1. Откройте **https://vk.com/dev** (не id.vk.com и не dev.vk.com!)
2. Войдите в аккаунт VK
3. В верхнем меню выберите **"Мои приложения"**

### Шаг 2: Создайте или найдите Standalone приложение

**Если приложения нет:**
1. Нажмите **"Создать приложение"**
2. Выберите тип: **"Standalone приложение"**
3. Название: любое (например "VK Parser")
4. Нажмите **"Подключить приложение"**
5. Скопируйте **Application ID** (это число, например 12345678)

**Если приложение уже есть:**
1. Откройте его
2. Скопируйте **Application ID**

### Шаг 3: Получите классический токен через OAuth

1. Откройте в браузере (замените `YOUR_APP_ID` на ваш Application ID):
   ```
   https://oauth.vk.com/authorize?client_id=YOUR_APP_ID&display=page&redirect_uri=https://oauth.vk.com/blank.html&scope=wall,groups&response_type=token&v=5.199
   ```

2. Нажмите **"Разрешить"**

3. После перенаправления в адресной строке будет URL вида:
   ```
   https://oauth.vk.com/blank.html#access_token=ВАШ_ТОКЕН&expires_in=86400&user_id=123456
   ```

4. **ВАЖНО:** Классический токен VK API выглядит так:
   - Длинная строка букв и цифр (без `vk1.a.` в начале)
   - Пример: `d165ed0dd165ed0dd165ed0dddd25853dbdd165d165ed0db84a1c02d67d4a7083b2f985`
   - НЕ начинается с `vk1.a.`

5. Скопируйте токен (часть между `access_token=` и `&`)

### Шаг 4: Обновите токен на сервере

```bash
nano /root/s360-streams/.env
# Замените VK_TOKEN= на классический токен (без vk1.a.)
VK_TOKEN=ваш_классический_токен_здесь

# Сохраните (Ctrl+O, Enter, Ctrl+X)
```

### Шаг 5: Перезапустите сервис

```bash
systemctl restart vk-to-telegram.service
tail -n 20 /root/s360-streams/vk_to_telegram.log
```

## Важно:

- **Классический токен VK API** получается через **vk.com/dev** (не VK ID!)
- Токен должен быть **Standalone приложения**
- Токен **НЕ** начинается с `vk1.a.` - это формат VK ID токенов
- Классический токен - это просто длинная строка букв и цифр
