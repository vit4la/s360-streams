"""
Конфигурация проекта для автоматической обработки и модерации постов из Telegram-каналов.
"""

import os

# ==========================
# TELEGRAM БОТ (модерационный)
# ==========================
# Токен бота для модерации (получить у @BotFather)
# ВАЖНО: Не коммитьте реальный токен в Git! Используйте переменную окружения
TELEGRAM_BOT_TOKEN = os.getenv("TELEGRAM_BOT_TOKEN", "YOUR_BOT_TOKEN_HERE")

# ID операторов (модераторов) - список user_id из Telegram
# Узнать свой user_id можно через @userinfobot или @getidsbot
MODERATOR_IDS = [
    1522224786,  # Оператор
]

# ==========================
# TELEGRAM ЮЗЕР-БОТ (Telethon)
# ==========================
# API ID и API Hash для Telethon
# Получить на https://my.telegram.org/apps
# ВАЖНО: Не коммитьте реальные ключи в Git! Используйте переменные окружения
TELEGRAM_API_ID = int(os.getenv("TELEGRAM_API_ID", "0")) or 32446088
TELEGRAM_API_HASH = os.getenv("TELEGRAM_API_HASH", "626b7d4e2ba80b62c1904938a845613d")

# Номер телефона для юзер-бота (в международном формате, например: +79991234567)
TELEGRAM_PHONE = "+79122812193"

# Сессия Telethon будет сохранена в файл (автоматически при первом входе)
TELEGRAM_SESSION_FILE = "telethon_session.session"

# ==========================
# ИСХОДНЫЕ КАНАЛЫ (откуда читаем посты)
# ==========================
# Список ID или username исходных каналов
# Можно указать как ID (например: -1001234567890) или username (например: "channelname")
SOURCE_CHANNEL_IDS = [
    "@elitetennis",  # Канал 1
    "@primetennis",  # Канал 2
]

# ==========================
# ЦЕЛЕВЫЕ КАНАЛЫ (куда публикуем)
# ==========================
# Список ID или username целевых каналов
# Можно указать как ID (например: -1001234567890) или username (например: "targetchannel")
TARGET_CHANNEL_IDS = [
    -4999682913,  # ID группы (с минусом для групп)
    # "@S360streams",  # Или можно использовать username
]

# ==========================
# OPENAI GPT
# ==========================
# API ключ OpenAI (получить на https://platform.openai.com/api-keys)
# ВАЖНО: Не коммитьте реальный ключ в Git! Используйте переменную окружения или .env файл
OPENAI_API_KEY = os.getenv("OPENAI_API_KEY", "sk-your-api-key-here")

# Модель GPT
OPENAI_MODEL = "gpt-4o"

# Промпт для GPT
GPT_PROMPT = """Ты — редактор спортивных новостей по теннису.
На входе — текст поста из Telegram-канала.
Нужно:
1. Придумать короткий яркий заголовок (до 70 символов).
2. Переписать новость простым, понятным языком — 2–4 предложения.
3. Подобрать 3–6 русскоязычных хэштегов по теме (можно смешанные с латиницей, например #теннис #WTA #ATP).
Не упоминай, что текст сгенерирован нейросетью. Не добавляй ссылки.
Верни ответ в JSON:
{ "title": "...", "body": "...", "hashtags": ["...", "..."] }."""

# Максимальное количество попыток при ошибках GPT
GPT_MAX_RETRIES = 3

# Задержка между попытками (секунды) - экспоненциальная: 1, 2, 4
GPT_RETRY_DELAYS = [1, 2, 4]

# ==========================
# БАЗА ДАННЫХ
# ==========================
# Путь к файлу SQLite БД
DATABASE_PATH = "posts.db"

# ==========================
# ЛОГИРОВАНИЕ
# ==========================
# Уровень логирования: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL = "INFO"

# Путь к директории с логами
LOG_DIR = "logs"

# Имя файла лога
LOG_FILE = "moderation_bot.log"

# Максимальный размер лог-файла (в байтах) перед ротацией
LOG_MAX_BYTES = 10 * 1024 * 1024  # 10 MB

# Количество резервных лог-файлов
LOG_BACKUP_COUNT = 5

# ==========================
# ПАРСИНГ ХЭШТЕГОВ
# ==========================
# Максимальная длина оригинального текста для показа оператору (символов)
ORIGINAL_TEXT_PREVIEW_LENGTH = 400

